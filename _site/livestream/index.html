<!doctype html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">   
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <link rel="stylesheet" href="/assets/css/index.css">



    <!--<title>Cedar Grove Christian - Home</title>-->
    <link rel="icon" type="image/x-icon" href="/assets/images/logo.png">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Livestream | Cedar Grove Christian</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Livestream" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A warm, inviting Chuckey church where everyone is welcome and God comes first." />
<meta property="og:description" content="A warm, inviting Chuckey church where everyone is welcome and God comes first." />
<link rel="canonical" href="http://localhost:4000/livestream/" />
<meta property="og:url" content="http://localhost:4000/livestream/" />
<meta property="og:site_name" content="Cedar Grove Christian" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Livestream" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"A warm, inviting Chuckey church where everyone is welcome and God comes first.","headline":"Livestream","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/assets/images/logo.png"}},"url":"http://localhost:4000/livestream/"}</script>
<!-- End Jekyll SEO tag -->


</head>
<body>
  <nav class="navbar navbar-expand-lg" >
        <div class="container-fluid">
            <a class="navbar-brand navbar-brand-nature" href="/">
                <img src="/assets/images/logo.png" alt="Logo" width="50" height="50" class="d-inline-block align-text-center">
                Cedar Grove Christian
              </a>
          
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0 ">
                <li class="nav-item">
    <a class="nav-link" aria-current="page" href="/">Home</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/contact/">Contact Us</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/calendar/">Calendar</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/about/">About Us</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/beliefs/">Our Beliefs</a>
  </li>
  <li class="nav-item dropdown">
    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
      Media
    </a>
    <ul class="dropdown-menu dropdown-menu-nature">
      <li><a class="dropdown-item" href="/livestream/">Livestream</a></li>
      <li><a class="dropdown-item" href="/archivedSermons/">Sermons</a></li>
    </ul>
  </li>
</ul>
<ul class="navbar-nav">
  <li class="nav-item">
    <a href="/prayer/" class="nav-link">Prayer Request!</a>
  </li>
            </ul>
          </div>
        </div>
      </nav>
  <div class="container py-5">
  <div class="text-center mb-4">
    <h1 class="display-5 fw-bold">Livestream</h1>
    <p class="lead mb-0">If we’re live, it will play here. Otherwise please check out our <a href="/archivedSermons/" id="sermonLink">sermons page.</a></p>
  </div>

  <!-- Player starts hidden; we only reveal it on confirmed live -->
  <div class="livestream-wrap">
    <div id="playerContainer" class="livestream-player is-hidden" aria-hidden="true">
      <div id="yt-live-player"></div>
    </div>
  </div>

  <!-- Fallback shown by default -->
  <div id="notLive" class="text-center mt-4">
    <p class="lead mb-3">We are not live at the moment.</p>
    <a class="btn btn-outline-secondary" href="/archivedSermons/">
      View previous sermons
    </a>
  </div>
</div>

<style>
.livestream-wrap{display:flex;justify-content:center}
.livestream-player{width:min(100%,960px);aspect-ratio:16/9;background:#000;border-radius:12px;overflow:hidden;box-shadow:0 8px 24px rgba(0,0,0,.15)}
.livestream-player iframe{width:100%;height:100%;border:0}
.is-hidden{display:none !important}
</style>

<!-- YouTube IFrame API -->
<script src="https://www.youtube.com/iframe_api"></script>
<script>
/* global YT */
(function(){
  var channelId = "UCdbE14mcESiZoj0wlNXG4bw";
  if (!channelId || typeof channelId !== 'string' || channelId.slice(0,2) !== 'UC') {
    console.error('Missing/invalid YouTube channel_id.');
  }

  var POLL_MS = 30000;     // check every 30s
  var START_GRACE_MS = 4000; // give live a moment to start
  var player = null, pollTimer = null, startTimer = null, liveShown = false;

  var playerContainer = document.getElementById('playerContainer');
  var notLive = document.getElementById('notLive');

  function showPlayer(){
    if (playerContainer){ playerContainer.classList.remove('is-hidden'); playerContainer.setAttribute('aria-hidden','false'); }
    if (notLive){ notLive.classList.add('is-hidden'); }
  }
  function showFallback(){
    if (playerContainer){ playerContainer.classList.add('is-hidden'); playerContainer.setAttribute('aria-hidden','true'); }
    if (notLive){ notLive.classList.remove('is-hidden'); }
  }
  function clearTimers(){
    if (pollTimer){ clearInterval(pollTimer); pollTimer = null; }
    if (startTimer){ clearTimeout(startTimer); startTimer = null; }
  }
  function safeState(){
    try { return player.getPlayerState(); } catch(e){ return -1; }
  }

  window.onYouTubeIframeAPIReady = function(){
    player = new YT.Player('yt-live-player', {
      width: '100%',
      height: '100%',
      playerVars: { autoplay: 1, rel: 0, modestbranding: 1 },
      events: { onReady: tryLiveOnce, onStateChange: onStateChange, onError: onError }
    });
  };

  function tryLiveOnce(){
    liveShown = false;
    showFallback();     // keep fallback visible until confirmed live
    clearTimers();

    try {
      player.loadVideoById('live_stream'); // official target for current live
    } catch(e){
      startPolling();
      return;
    }

    startTimer = setTimeout(function(){
      var s = safeState();
      // only show if actually playing/buffering
      if (s === 1 || s === 3){
        liveShown = true;
        showPlayer();
        clearTimers();
      } else {
        showFallback();
        startPolling();
      }
    }, START_GRACE_MS);
  }

  function onStateChange(evt){
    var s = evt && typeof evt.data === 'number' ? evt.data : -1;
    if ((s === 1 || s === 3) && !liveShown){
      liveShown = true;
      showPlayer();
      clearTimers(); // stop polling while live
    }
    if (s === 0 && !liveShown){
      // ended right away while probing → fallback
      showFallback();
      startPolling();
    }
  }

  function onError(){
    if (!liveShown){
      showFallback();
      startPolling();
    }
  }

  function startPolling(){
    clearTimers();
    showFallback();
    pollTimer = setInterval(function(){
      try {
        player.loadVideoById('live_stream');
      } catch(e){ /* try again next tick */ }
      startTimer = setTimeout(function(){
        var s = safeState();
        if (s === 1 || s === 3){
          liveShown = true;
          showPlayer();
          clearTimers();
        } else {
          showFallback();
        }
      }, START_GRACE_MS);
    }, POLL_MS);
  }
})();
</script>

    <footer class="site-footer">
  <div class="container footer-grid">
    <div>
      <p class="footer-title">Cedar Grove Christian</p>
      <p>A local Chuckey church where everyone is welcome and God comes first.</p>
    </div>
    <div>
      <p class="footer-title">Gathering Times</p>
      


<ul class="list">
  <li>
    Sunday Service ·
    9:30 AM
  </li>
  <li>
    Sunday School ·
    10:30 AM
  </li>
  <li>
    Wednesday Bible Study ·
    6:30 PM
  </li>
</ul>
    </div>
    <div>
      <p class="footer-title">Visit Us</p>
      <p>5270 Chuckey Pike, Chuckey, TN 37641</p>
      <p><a class="text-link" href="https://www.google.com/maps/search/?api=1&query=5270%20Chuckey%20Pike,%20Chuckey,%20TN%2037641" target="_blank" rel="noopener">Open in Google Maps</a></p>
      <p><a class="text-link" href="tel:4235257413">423-525-7413</a></p>
<div class="social-icons">
  
  <a href="https://www.facebook.com/profile.php?id=100064446712278" target="_blank" rel="noopener" aria-label="Facebook">
    <i class="fab fa-facebook-f"></i>
  </a>
  
  
  <a href="https://www.youtube.com/@CedarGroveChristian" target="_blank" rel="noopener" aria-label="YouTube">
    <i class="fab fa-youtube"></i>
  </a>
  
  
  <a href="mailto:cedargrovechristiantn@gmail.com" aria-label="Email">
    <i class="fas fa-envelope"></i>
  </a>
  
</div>



    </div>
  </div>
  <div class="container footer-bottom">
    <p>&copy; 2025 Cedar Grove Christian. All rights reserved.</p>
  </div>
</footer>

</body>
</html>
